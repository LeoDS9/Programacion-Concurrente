process alumno[id: 0..44]{
    text enunciado, examen;
    int nota;
    Examen.llegar(id);
    Examen.esperarEnunciado(enunciado);
    //resolver examen;
    Escritorio.entregarExamen(id,examen);
    Escritorio.esperarNota(id,nota);
}

process preceptor{
    int i;
    text enunciado;
    Examen.darEnunciado(enunciado);
}

process profesora{
    int nota, idA;
    text examen;
    for int i = 1..45{
        Escritorio.esperarExamen();
        Escritorio.obtenerExamen(idA,examen);
        nota = corregirExamen(examen);
        Escritorio.darNota(idA,nota);
    }
}


monitor Examen{
    cond esperaA, esperaP;
    int cant = 0;
    text enunciado;

    Procedure llegar(id: in int){
        cant++;
        if (cant == 45)
            signal(esperaP);
    }

    Procedure esperarEnunciado(enun: out text){
        wait(esperaA);
        enun = enunciado;
    }

    Procedure darEnunciado(enun: in int){
        if(cant < 45)
            wait(esperaP);
        enunciado = enun;
        signal_all(esperaA);
    }

    
}

monitor Escritorio{
    cond esperaNota, esperaProf;
    text examenes[45];
    int notas[45];
    Cola cola;

    Procedure entregarExamen(id: in int, ex: in text){
        examenes[id] = ex;
        Push(cola,id);
        signal(esperaProf);
    }

    Procedure esperarNota(id: in int, n: out int){
        wait(esperarNota);
        n = notas[id];
    }

    Procedure esperarExamen(){
        if (Empty(cola))
            wait(esperaProf);
    }

    Procedure obtenerExamen(idA: out int, ex: out text){
        Pop(cola,id);
        ex = examenes[id];
    }

    Procedure darNota(idA: in int, n: in int){
        notas[idA] = n;
        signal(esperarNota);
    }
}

